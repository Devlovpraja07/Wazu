<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>Quran Kareem</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'quran-primary': '#2ca4ab',
            'dark-bg': '#1a202c',
            'dark-card': '#2d3748'
          }
        }
      }
    }
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
    .active-nav-item {
      color: #2ca4ab !important;
    }
    .dark .nav-icon-active {
      filter: invert(63%) sepia(44%) saturate(459%) hue-rotate(142deg) brightness(89%) contrast(87%);
    }
    /* Basic style for bottom nav text */
    .nav-item span {
        display: block;
        font-size: 0.75rem; /* text-xs */
        margin-top: 0.25rem; /* mt-1 */
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      color: #6b7280; /* gray-500 */
      transition: color 0.2s ease-in-out;
    }
     .nav-item:hover {
        color: #4b5563; /* gray-600 */
     }
    .dark .nav-item {
       color: #9ca3af; /* gray-400 */
    }
    .dark .nav-item:hover {
        color: #d1d5db; /* gray-300 */
    }
  </style>
</head>
<body class="bg-[#f8f9fb] dark:bg-dark-bg min-h-screen font-sans pb-20">
  <div class="max-w-md mx-auto pt-5 px-4">
    <!-- Header Section -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-black dark:text-white text-2xl font-bold">Quran Kareem</h1>
      <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-card transition-colors">
        <i class="fas fa-sun text-yellow-500 dark:text-gray-300 text-xl" id="theme-icon"></i>
      </button>
    </div>

    <!-- Main Card -->
    <div class="bg-[#121921] dark:bg-dark-card rounded-xl p-4 flex items-center justify-between mb-6 shadow-lg">
      <div class="flex items-center space-x-4">
        <img id="main-card-img" alt="Quran" class="w-12 h-12 rounded-lg" src="https://storage.googleapis.com/a1aa/image/40572fc6-4b93-4880-3e4d-acbab854fc6e.jpg"/>
        <div>
          <p id="main-card-title" class="text-white dark:text-gray-200 font-medium">Read Quran</p>
          <p id="main-card-subtitle" class="text-gray-400 text-sm">Surah Al Bakarah</p>
        </div>
      </div>
      <a href="#" id="main-card-button" class="bg-white dark:bg-gray-600 dark:text-white text-black px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">
        Start Reading
      </a>
    </div>

    <!-- Features Grid -->
    <div id="features-grid" class="grid grid-cols-2 gap-3 mb-6">
      <!-- Feature cards will be loaded here by JavaScript -->
      <div class="feature-card dark:bg-dark-card bg-white p-6 rounded-xl flex flex-col items-center hover:shadow-md transition-shadow" data-feature="juzz">
        <img class="w-14 h-14 mb-3" src="https://storage.googleapis.com/a1aa/image/00d8181e-af29-4a1a-abb5-ffdaed3672d5.jpg"/>
        <p class="text-gray-700 dark:text-gray-300 text-sm font-medium">Juzz Index</p>
      </div>
      <div class="feature-card dark:bg-dark-card bg-white p-6 rounded-xl flex flex-col items-center hover:shadow-md transition-shadow" data-feature="surah">
        <img class="w-14 h-14 mb-3" src="https://storage.googleapis.com/a1aa/image/21088a06-b2a6-4e4c-da53-5091385fa909.jpg"/>
        <p class="text-gray-700 dark:text-gray-300 text-sm font-medium">Surah Index</p>
      </div>
      <div class="feature-card dark:bg-dark-card bg-white p-6 rounded-xl flex flex-col items-center hover:shadow-md transition-shadow" data-feature="bookmarks">
        <img class="w-14 h-14 mb-3" src="https://storage.googleapis.com/a1aa/image/965a02f1-74ea-4427-e56c-cd50c4c5891e.jpg"/>
        <p class="text-gray-700 dark:text-gray-300 text-sm font-medium">Bookmarks</p>
      </div>
      <div class="feature-card dark:bg-dark-card bg-white p-6 rounded-xl flex flex-col items-center hover:shadow-md transition-shadow" data-feature="settings">
        <img class="w-14 h-14 mb-3" src="https://storage.googleapis.com/a1aa/image/eb5814fc-3bcd-4c51-90dd-b4ebf6f3ab99.jpg"/>
        <p class="text-gray-700 dark:text-gray-300 text-sm font-medium">Settings</p>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-card border-t border-gray-200 dark:border-gray-700 shadow-lg">
    <div class="max-w-md mx-auto px-6 py-3">
      <div class="flex justify-between">
        <a href="#" class="nav-item active-nav-item">
          <i class="fas fa-home nav-icon-active"></i>
          <span class="nav-text">Home</span>
        </a>
        <a href="#" class="nav-item">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Quran</span>
        </a>
        <a href="#" class="nav-item">
          <i class="fas fa-bookmark"></i>
          <span class="nav-text">Bookmarks</span>
        </a>
        <a href="#" class="nav-item">
          <i class="fas fa-praying-hands"></i>
          <span class="nav-text">Prayer</span>
        </a>
        <a href="#" class="nav-item">
          <i class="fas fa-cog"></i>
          <span class="nav-text">Settings</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // Firebase Configuration (Replace with your project details)
    const firebaseConfig = {
      apiKey: "AIzaSyAY3hXmpCXJUVrBtOaosPY_tsse3sx-O5o", // Your API Key
      databaseURL: "https://nima-d4d7d-default-rtdb.asia-southeast1.firebasedatabase.app", // Your Database URL
      projectId: "nima-d4d7d", // Your Project ID
      storageBucket: "nima-d4d7d.firebasestorage.app" // Your Storage Bucket
    };

    // Initialize Firebase
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const database = firebase.database();

    // Reference to the app data in Firebase
    const appDataRef = database.ref('appData');

    // Listen for data changes
    appDataRef.on('value', (snapshot) => {
      const data = snapshot.val();
      if (data) {
        // Update Main Card
        if (data.mainCard) {
          document.getElementById('main-card-img').src = data.mainCard.imageUrl || '';
          document.getElementById('main-card-title').textContent = data.mainCard.title || '';
          document.getElementById('main-card-subtitle').textContent = data.mainCard.subtitle || '';
          const mainCardButton = document.getElementById('main-card-button');
          mainCardButton.textContent = data.mainCard.buttonText || 'Button';
          mainCardButton.href = data.mainCard.link || '#';
        }

        // Update Feature Cards
        if (data.features) {
          const featuresGrid = document.getElementById('features-grid');
          // Clear existing dynamic content (or update specific elements if structure is fixed)
          // For this fixed 4-card structure, let's update them directly
          const featureCards = featuresGrid.querySelectorAll('.feature-card');

          featureCards.forEach(card => {
              const featureKey = card.getAttribute('data-feature');
              if (featureKey && data.features[featureKey]) {
                  const featureData = data.features[featureKey];
                  const img = card.querySelector('img');
                  const text = card.querySelector('p');
                  // Assuming the link is handled by the card click itself, add data-link
                  card.setAttribute('data-link', featureData.link || '#');

                  if (img) img.src = featureData.imageUrl || '';
                  if (text) text.textContent = featureData.text || '';
              }
          });
        }
      } else {
          console.log("No data found in Firebase");
          // Optional: Display default/placeholder content if no data
      }
    }, (errorObject) => {
      console.log('The read failed: ' + errorObject.name);
      // Optional: Display an error message to the user
    });


    // Dark Mode Toggle (Keep existing functionality)
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const html = document.documentElement;

    // Load saved theme
    let theme = localStorage.getItem('theme') || 'light';
    if (theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
      themeIcon.classList.replace('fa-sun', 'fa-moon');
    }

    themeToggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      if (html.classList.contains('dark')) {
        themeIcon.classList.replace('fa-sun', 'fa-moon');
        localStorage.setItem('theme', 'dark');
      } else {
        themeIcon.classList.replace('fa-moon', 'fa-sun');
        localStorage.setItem('theme', 'light');
      }
    });

    // Navigation Active State (Keep existing functionality)
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
      item.addEventListener('click', function(e) {
        // Prevent default link behavior if using '#'
        if (this.getAttribute('href') === '#') {
             e.preventDefault();
        }
        navItems.forEach(nav => {
             nav.classList.remove('active-nav-item');
             // Also remove active class from the icon if needed (based on your CSS)
             nav.querySelector('i').classList.remove('nav-icon-active');
        });
        this.classList.add('active-nav-item');
         // Add active class to the icon
        this.querySelector('i').classList.add('nav-icon-active');
      });
    });

    // Feature Card Click Handler (Use data-link)
    const featureCards = document.querySelectorAll('.feature-card');
    featureCards.forEach(card => {
      card.addEventListener('click', () => {
        const link = card.getAttribute('data-link');
        if (link && link !== '#') {
            window.location.href = link; // Navigate if a link is set
        } else {
            // Add your default click handling here (e.g., show a message)
            console.log('Feature clicked:', card.querySelector('p').textContent, 'No specific link set.');
        }
      });
    });

  </script>
</body>
</html>